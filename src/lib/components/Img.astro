---
import { Image, getImage } from "astro:assets";

type Props = {
  src: any;
  alt?: string;
  width?: string | number;
  height?: string | number;
  class?: string;
  loading?: "lazy" | "eager";
  picture_width?: string;
  picture_height?: string;
  style?: string;
};

const {
  src,
  alt = "",
  width,
  height,
  class: className = "",
  loading = "lazy",
  style = "",
} = Astro.props;

const placeholderImg = await getImage({
  src,
  width: 4,
});
---

<Image
  {alt}
  {src}
  {loading}
  format="png"
  quality={100}
  class={className}
  fetchpriority="high"
  width={Number(width)}
  height={Number(height)}
  style={`background-image: url(${placeholderImg.src});` + style}
/>
